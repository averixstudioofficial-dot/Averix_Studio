<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pencil Art ‚Äî Averix Studio</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            --gold: #ffcc00;
            --cyan: #00eaff;
            --bg-dark: #0e0e0e;
            --glass: rgba(255, 255, 255, 0.05);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }
        body { background: var(--bg-dark); color: white; overflow-x: hidden; }
        .header { text-align: center; padding: 100px 0 10px 0; font-size: clamp(26px, 6vw, 38px); font-weight: 700; color: var(--gold); text-shadow: 0 0 15px rgba(255, 204, 0, 0.3); }
        .subtitle { text-align: center; font-size: 16px; opacity: 0.8; margin-bottom: 40px; padding: 0 20px; }
        .back-btn { position: fixed; top: 20px; left: 20px; background: var(--glass); padding: 10px 20px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); font-size: 14px; color: var(--gold); text-decoration: none; z-index: 1000; transition: 0.3s; font-weight: 600; }
        .back-btn:hover { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }
        .container { width: 90%; max-width: 1200px; margin: auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; padding-bottom: 50px; }
        .plan { background: var(--glass); padding: 30px; border-radius: 24px; border: 1px solid rgba(255, 204, 0, 0.15); backdrop-filter: blur(10px); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); display: flex; flex-direction: column; position: relative; }
        .plan:hover { transform: translateY(-10px); border-color: var(--gold); box-shadow: 0 10px 30px rgba(255, 204, 0, 0.1); }
        .plan-title { font-size: 20px; font-weight: 700; margin-bottom: 12px; color: var(--gold); min-height: 50px; }
        .price { font-size: 32px; font-weight: 800; margin-bottom: 20px; color: var(--cyan); text-shadow: 0 0 10px rgba(0, 234, 255, 0.2); }
        .price small { font-size: 14px; opacity: 0.6; color: #fff; }
        .features { margin-bottom: 25px; list-style: none; flex-grow: 1; }
        .features li { margin: 10px 0; font-size: 14px; opacity: 0.9; display: flex; align-items: center; }
        .features li::before { content: "‚óè"; color: var(--gold); margin-right: 10px; font-size: 10px; }
        .order-input { width: 100%; background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.1); padding: 12px; border-radius: 12px; color: #fff; font-size: 13px; margin-bottom: 15px; outline: none; resize: none; transition: 0.3s; }
        .order-input:focus { border-color: var(--cyan); }
        .btn { display: block; width: 100%; padding: 14px; background: var(--gold); color: black; text-align: center; font-weight: 700; border-radius: 12px; text-decoration: none; border: none; cursor: pointer; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; }
        .btn:hover { background: #fff; transform: scale(1.02); box-shadow: 0 0 20px var(--gold); }
        .sample-title { text-align: center; margin-top: 60px; font-size: 28px; font-weight: 700; color: var(--cyan); }
        .portfolio-grid { width: 90%; max-width: 1200px; margin: 40px auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .art-card { background: rgba(255,255,255,0.02); padding: 25px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); text-align: center; transition: 0.3s; }
        .art-card:hover { border-color: var(--gold); background: rgba(255, 204, 0, 0.03); }
        .art-card h4 { margin-bottom: 15px; color: #fff; font-size: 16px; }
        .view-art-btn { display: inline-block; color: var(--cyan); text-decoration: none; border: 1px solid var(--cyan); padding: 6px 20px; border-radius: 30px; font-size: 13px; font-weight: 600; transition: 0.3s; cursor: pointer; }
        .view-art-btn:hover { background: var(--cyan); color: #000; }
        .no-data { text-align: center; color: #555; grid-column: 1 / -1; padding: 40px; }
        .frame-highlight { border: 2px solid var(--cyan) !important; background: rgba(0, 234, 255, 0.03); }
        .frame-highlight .btn { background: var(--cyan); }
        
        /* Success Message Styles */
        .success-message {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, #00b09b, #96c93d);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 350px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .success-message.show {
            transform: translateX(0);
        }
        .success-message h4 {
            margin-bottom: 5px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .success-message p {
            font-size: 13px;
            opacity: 0.9;
            margin: 0;
        }
        
        /* Email Button Style */
        .email-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .email-btn::before {
            content: "‚úâÔ∏è";
            font-size: 16px;
        }
    </style>
</head>

<body>
<a href="index.html" class="back-btn">‚Üê Home</a>

<div class="header" data-aos="fade-down">‚úèÔ∏è Pencil & Colour Art Services</div>
<div class="subtitle" data-aos="fade-up">Beautiful hand-drawn portraits. Perfect for gifts and memories.</div>

<div class="container">
    <div class="plan" data-aos="fade-up">
        <div class="plan-title">Pencil Art<br>(Single Person)</div>
        <div class="price">‚Çπ100</div>
        <ul class="features">
            <li>Black & White Portrait</li>
            <li>A4 High Quality Sheet</li>
            <li>High Accuracy Face Sketch</li>
            <li>Delivery: 1 Day</li>
        </ul>
        <div class="order-form">
            <textarea id="msg-single" class="order-input" placeholder="Mention photo details or custom notes..."></textarea>
            <button onclick="checkAuthAndOrder('Pencil Art - Single Person', 'msg-single')" class="btn email-btn">Send Inquiry via Email</button>
        </div>
    </div>

    <div class="plan" data-aos="fade-up" data-aos-delay="100">
        <div class="plan-title">Multiple Person<br>Pencil Art</div>
        <div class="price">‚Çπ100 <small>/ person</small></div>
        <ul class="features">
            <li>2 People = ‚Çπ200</li>
            <li>3 People = ‚Çπ300</li>
            <li>Group Portraits</li>
            <li>Wall-Ready Options</li>
        </ul>
        <div class="order-form">
            <textarea id="msg-multi" class="order-input" placeholder="How many persons in the photo?"></textarea>
            <button onclick="checkAuthAndOrder('Pencil Art - Multiple Persons', 'msg-multi')" class="btn email-btn">Send Inquiry via Email</button>
        </div>
    </div>

    <div class="plan frame-highlight" data-aos="fade-up" data-aos-delay="200">
        <div class="plan-title">Add Premium<br>Frame</div>
        <div class="price">‚Çπ800</div>
        <ul class="features">
            <li>Premium Quality Frame</li>
            <li>Glass Protection</li>
            <li>Wall-Ready & Beautiful</li>
            <li>Perfect for Gifts</li>
        </ul>
        <div class="order-form">
            <textarea id="msg-frame" class="order-input" placeholder="Any specific frame color (Black/Brown/Gold)?"></textarea>
            <button onclick="checkAuthAndOrder('Add-on: Premium Frame', 'msg-frame')" class="btn email-btn">Send Inquiry via Email</button>
        </div>
    </div>

    <div class="plan" data-aos="fade-up" data-aos-delay="300">
        <div class="plan-title">Colour Pencil<br>Art</div>
        <div class="price">‚Çπ250</div>
        <ul class="features">
            <li>Full Colour Portrait</li>
            <li>A4 or A3 Sheet Options</li>
            <li>Smooth Colour Blending</li>
            <li>Delivery: 2 Days</li>
        </ul>
        <div class="order-form">
            <textarea id="msg-colour" class="order-input" placeholder="Describe your photo and size..."></textarea>
            <button onclick="checkAuthAndOrder('Colour Pencil Art', 'msg-colour')" class="btn email-btn">Send Inquiry via Email</button>
        </div>
    </div>
</div>

<div class="sample-title" data-aos="fade-up">üì∏ Our Recent Artworks</div>
<div id="art-portfolio-display" class="portfolio-grid">
    <div class="no-data">Loading sketches...</div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init({ duration: 1000, once: true });

    const firebaseConfig = {
        apiKey: "AIzaSyCQ53VH7o3SoWYh1bsWmxJQreJJriYRtHc",
        authDomain: "averixcreativestudio.firebaseapp.com",
        projectId: "averixcreativestudio",
        storageBucket: "averixcreativestudio.firebasestorage.app",
        messagingSenderId: "963089827741",
        appId: "1:963089827741:web:72b01b209a4785e1f51174"
    };

    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();
    const auth = firebase.auth();

    let currentUser = null;

    // Monitor Auth Status
    auth.onAuthStateChanged(user => {
        currentUser = user;
        loadArtPortfolio(); 
    });

    // 1. Portfolio Loading with Secure Links
    function loadArtPortfolio() {
        const display = document.getElementById('art-portfolio-display');
        
        db.collection("portfolio")
          .where("category", "==", "Pencil Art")
          .orderBy("timestamp", "desc")
          .onSnapshot(snapshot => {
            if (snapshot.empty) {
                display.innerHTML = '<div class="no-data">No art samples uploaded yet.</div>';
                return;
            }

            display.innerHTML = "";
            snapshot.forEach(doc => {
                const item = doc.data();
                display.innerHTML += `
                    <div class="art-card" data-aos="zoom-in">
                        <h4>${item.title}</h4>
                        <a href="javascript:void(0)" onclick="secureArtLink('${item.link}')" class="view-art-btn">View Artwork ‚Üí</a>
                    </div>`;
            });
        });
    }

    // 2. Secure Link Redirect
    function secureArtLink(link) {
        if (currentUser) {
            window.open(link, '_blank');
        } else {
            alert("üîí Please Login to view our full pencil artworks!");
            window.location.href = "index.html";
        }
    }

    // 3. Email Order Function
    function checkAuthAndOrder(serviceName, inputId) {
        if (currentUser) {
            const userMsg = document.getElementById(inputId).value;
            
            // Your company email
            const companyEmail = "averixstudioofficial@gmail.com";
            const emailSubject = `Pencil Art Inquiry: ${serviceName}`;
            const emailBody = `Dear Averix Studio,\n\nI'm interested in ordering: ${serviceName}.\n\nMy Requirements:\n${userMsg || 'I would like to discuss the portrait details.'}\n\nPlease contact me with more information about:\n- Payment process\n- Delivery time\n- Photo submission method\n\nBest regards,\n[Your Name]`;
            
            // Create email link
            const mailtoLink = `mailto:${companyEmail}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
            
            // Open user's email client
            window.location.href = mailtoLink;
            
            // Show success message
            showSuccessMessage("Email client opened!", "Please send your inquiry via email. We'll respond within 24 hours.");
            
        } else {
            alert("üîí Please Login to send an inquiry!");
            window.location.href = "index.html";
        }
    }
    
    // Success message function
    function showSuccessMessage(title, message) {
        // Remove any existing success messages
        const existingMsg = document.querySelector('.success-message');
        if (existingMsg) existingMsg.remove();
        
        // Create new success message
        const successMsg = document.createElement('div');
        successMsg.className = 'success-message';
        successMsg.innerHTML = `
            <h4>‚úâÔ∏è ${title}</h4>
            <p>${message}</p>
        `;
        
        document.body.appendChild(successMsg);
        
        // Show message with animation
        setTimeout(() => {
            successMsg.classList.add('show');
        }, 10);
        
        // Hide message after 5 seconds
        setTimeout(() => {
            successMsg.classList.remove('show');
            setTimeout(() => {
                if (successMsg.parentNode) {
                    successMsg.parentNode.removeChild(successMsg);
                }
            }, 500);
        }, 5000);
    }
</script>
</body>
</html>
