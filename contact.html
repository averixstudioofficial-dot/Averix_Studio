<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Averix Studio ‚Äì Contact Premium</title>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /* Unga original CSS - No design changes made */
        :root {
            --gold: #ffcc00;
            --dark-gold: #ff9900;
            --bg-black: #020202;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }
        body { background: var(--bg-black); color: #fff; overflow-x: hidden; }

        .video-bg {
            position: fixed; top: 50%; left: 50%; width: 100%; height: 100%;
            z-index: -2; transform: translate(-50%, -50%);
            overflow: hidden;
        }
        .video-bg video {
            width: 100%; height: 100%; object-fit: cover; opacity: 0.35;
        }
        .video-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent, var(--bg-black));
            z-index: -1;
        }

        .gold-beam {
            position: fixed; left: 0; top: 0; width: 4px; height: 100%;
            background: linear-gradient(var(--gold), var(--dark-gold), var(--gold));
            box-shadow: 0 0 20px var(--gold); z-index: 100;
        }

        .back-btn {
            position: fixed; top: 20px; left: 25px; background: rgba(0,0,0,0.6);
            padding: 10px 20px; border-radius: 30px; border: 1px solid var(--gold);
            backdrop-filter: blur(10px); font-size: 14px; color: var(--gold);
            text-decoration: none; z-index: 1000; transition: 0.3s;
            font-weight: 600;
        }
        .back-btn:hover { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }

        .banner {
            width: 100%; height: 35vh;
            display: flex; justify-content: center; align-items: center;
            position: relative; text-align: center;
        }
        .banner h1 {
            font-size: clamp(30px, 8vw, 55px); font-weight: 800;
            letter-spacing: 4px; text-transform: uppercase;
            background: linear-gradient(to right, #fff, var(--gold), #fff);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(255,204,0,0.4));
        }

        .container {
            max-width: 1200px; margin: auto;
            display: flex; flex-wrap: wrap; justify-content: center;
            padding: 20px 5% 80px; gap: 30px; position: relative; z-index: 1;
        }

        .info-panel {
            flex: 1; min-width: 320px; padding: 40px; border-radius: 30px;
            background: var(--glass); backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            transition: 0.4s;
        }
        .info-panel:hover { border-color: var(--gold); transform: translateY(-5px); }

        .section-title { font-size: clamp(24px, 4vw, 32px); font-weight: 700; color: var(--gold); margin-bottom: 20px; letter-spacing: 1px; }
        .sub-title { color: var(--gold); font-size: 17px; margin-top: 25px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .text-block { font-size: 14.5px; opacity: 0.8; line-height: 1.8; }

        .contact-card {
            flex: 1; min-width: 320px; padding: 40px; border-radius: 30px;
            background: rgba(255, 255, 255, 0.07); backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
        }

        .contact-title { font-size: 24px; color: var(--gold); font-weight: 700; margin-bottom: 25px; text-transform: uppercase; }

        .contact-form textarea {
            width: 100%; background: rgba(0, 0, 0, 0.4); border: 1px solid var(--glass-border);
            padding: 18px; border-radius: 15px; color: #fff; margin-bottom: 20px;
            outline: none; font-size: 15px; transition: 0.3s; resize: none;
        }
        .contact-form textarea:focus { border-color: var(--gold); background: rgba(0,0,0,0.6); }

        .submit-btn {
            width: 100%; padding: 16px; background: var(--gold); color: #000;
            font-weight: 700; border: none; border-radius: 15px; cursor: pointer;
            font-size: 15px; text-transform: uppercase; letter-spacing: 1px;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .submit-btn:hover { background: #fff; transform: scale(1.02); box-shadow: 0 10px 20px rgba(255,204,0,0.3); }

        .social-links { margin-top: 30px; display: flex; flex-wrap: wrap; gap: 12px; }
        .social-links a {
            color: #fff; text-decoration: none; font-size: 12px; font-weight: 600;
            padding: 8px 18px; border: 1px solid var(--glass-border);
            border-radius: 50px; transition: 0.3s; background: var(--glass);
        }
        .social-links a:hover { background: var(--gold); color: #000; border-color: var(--gold); }

        .working-hours {
            margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--glass-border);
        }
    </style>
</head>
<body>

<div class="video-bg">
    <video autoplay muted loop playsinline>
        <source src="static/bg.mp4" type="video/mp4">
    </video>
</div>
<div class="video-overlay"></div>

<div class="gold-beam"></div>
<a href="index.html" class="back-btn">‚Üê Home</a>

<div class="banner" data-aos="fade-down">
    <h1>CONNECT WITH US</h1>
</div>

<div class="container">
    <div class="info-panel" data-aos="fade-right">
        <h2 class="section-title">Our Vision</h2>
        <p class="text-block">
            We aim to redefine storytelling through high-end animation and digital art. 
            Averix Studio is committed to turning your imagination into a cinematic reality.
        </p>

        <h3 class="sub-title">Quick Support</h3>
        <p class="text-block">
            üìû +91 93604 36090<br>
            üìß averixstudioofficial@gmail.com
        </p>

        <div class="social-links">
            <a href="https://www.instagram.com/averix_animation" target="_blank">Instagram</a>
            <a href="https://www.linkedin.com/in/averix-studio-8410a9393" target="_blank">LinkedIn</a>
        </div>
    </div>

    <div class="contact-card" data-aos="fade-left">
        <h2 class="contact-title">Start a Conversation</h2>
        <div class="contact-form">
            <p style="font-size: 14px; margin-bottom: 12px; color: var(--gold); opacity: 0.9;">Tell us your name and your project query:</p>
            <textarea id="userMessage" rows="6" placeholder="Example: Hi, I'm Santhosh. I want to inquire about 3D Animation services..." required></textarea>
            <button id="sendBtn" onclick="handleContactSubmit()" class="submit-btn">Send via WhatsApp & Cloud</button>
        </div>

        <div class="working-hours">
            <p style="font-size: 14px; color: var(--gold); font-weight: 600;">Creative Hours:</p>
            <p style="font-size: 13.5px; opacity: 0.7;">Monday - Saturday: 09:00 AM - 08:00 PM</p>
        </div>
    </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init({ duration: 1000, once: true });

    // 1. Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCQ53VH7o3SoWYh1bsWmxJQreJJriYRtHc",
        authDomain: "averixcreativestudio.firebaseapp.com",
        projectId: "averixcreativestudio",
        storageBucket: "averixcreativestudio.firebasestorage.app",
        messagingSenderId: "963089827741",
        appId: "1:963089827741:web:72b01b209a4785e1f51174"
    };

    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();
    const auth = firebase.auth();

    // 2. Logic to Save to Firestore and Redirect to WhatsApp
    function handleContactSubmit() {
        const message = document.getElementById('userMessage').value;
        const btn = document.getElementById('sendBtn');
        const phoneNumber = "919360436090";

        // Check if message is empty
        if (message.trim() === "") {
            alert("Please enter a message!");
            return;
        }

        // --- SECURITY CHECK: Check if user is logged in ---
        const user = auth.currentUser;
        if (!user) {
            alert("üîí Access Denied: Please Login to send messages.");
            window.location.href = "index.html"; // Redirects to Login page
            return;
        }

        btn.innerText = "Processing...";
        btn.disabled = true;

        // Step A: Save to Firestore with User Details
        db.collection("enquiries").add({
            message: message,
            userName: user.displayName,
            userEmail: user.email,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        })
        .then(() => {
            // Step B: Redirect to WhatsApp
            const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent("Averix Support Request from " + user.displayName + ": " + message)}`;
            window.open(whatsappURL, '_blank');
            
            // Success reset
            btn.innerText = "Message Sent!";
            document.getElementById('userMessage').value = "";
            btn.disabled = false;
        })
        .catch((error) => {
            console.error("Error saving message: ", error);
            alert("Something went wrong, but you can still message on WhatsApp.");
            window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank');
            btn.innerText = "Send via WhatsApp & Cloud";
            btn.disabled = false;
        });
    }
</script>

</body>
</html>
